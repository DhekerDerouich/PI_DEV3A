<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane fx:id="rootPane"
            xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="tn.esprit.farmvision.gestionuser.controller.GestionUsersControllerFX"
            style="-fx-background-color: linear-gradient(to bottom, #f8f9fa, #e9ecef);">

    <padding>
        <Insets top="20" right="25" bottom="20" left="25"/>
    </padding>

    <!-- ================= HEADER ================= -->
    <top>
        <VBox spacing="20">

            <HBox alignment="CENTER_LEFT" spacing="20">
                <Button text="â† Retour Dashboard"
                        fx:id="btnRetour"
                        onAction="#handleRetour"
                        style="-fx-background-color: #6c757d;
                               -fx-text-fill: white;
                               -fx-font-weight: bold;
                               -fx-background-radius: 8;
                               -fx-padding: 10 20;"/>

                <Label text="Gestion des Utilisateurs"
                       style="-fx-font-size: 26px;
                              -fx-font-weight: bold;
                              -fx-text-fill: #0d6efd;"
                       HBox.hgrow="ALWAYS"/>
            </HBox>

            <!-- Barre Recherche -->
            <HBox spacing="15" alignment="CENTER_LEFT">

                <TextField fx:id="txtSearch"
                           promptText="ðŸ”Ž Recherche (nom, prÃ©nom, email)..."
                           prefWidth="350"
                           style="-fx-background-radius: 8;
                                  -fx-padding: 8;"/>

                <ComboBox fx:id="cbFilterRole"
                          promptText="Filtrer par rÃ´le"
                          prefWidth="200"
                          style="-fx-background-radius: 8;"/>

                <Label text="Recherche automatique"
                       style="-fx-text-fill: #198754;
                              -fx-font-weight: bold;"/>
            </HBox>

        </VBox>
    </top>

    <!-- ================= TABLE ================= -->
    <center>

        <TableView fx:id="tableUsers"
                   VBox.vgrow="ALWAYS"
                   style="-fx-background-radius: 10;
                          -fx-border-radius: 10;
                          -fx-border-color: #dee2e6;
                          -fx-border-width: 1;">

            <columns>
                <TableColumn fx:id="colNom" text="Nom" prefWidth="110"/>
                <TableColumn fx:id="colPrenom" text="PrÃ©nom" prefWidth="110"/>
                <TableColumn fx:id="colEmail" text="Email" prefWidth="220"/>
                <TableColumn fx:id="colRole" text="RÃ´le" prefWidth="140" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colDetails" text="DÃ©tails" prefWidth="200"/>
                <TableColumn fx:id="colRemarques" text="Remarques" prefWidth="200"/>
                <TableColumn fx:id="colPassword" text="Mot de passe" prefWidth="130" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colActivated" text="ActivÃ©" prefWidth="90" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colDateCreation" text="Date crÃ©ation" prefWidth="130" style="-fx-alignment: CENTER;"/>
            </columns>

            <placeholder>
                <VBox alignment="CENTER" spacing="12" style="-fx-padding: 50;">
                    <Label text="Aucun utilisateur trouvÃ©"
                           style="-fx-font-size: 16px;
                                  -fx-text-fill: #6c757d;
                                  -fx-font-weight: bold;"/>
                    <Label text="Ajoutez un utilisateur ou modifiez les filtres"
                           style="-fx-font-size: 13px;
                                  -fx-text-fill: #adb5bd;"/>
                </VBox>
            </placeholder>

        </TableView>

    </center>

    <!-- ================= FOOTER ================= -->
    <bottom>
        <VBox spacing="15" style="-fx-padding: 15 0 0 0;">

            <HBox spacing="15" alignment="CENTER_RIGHT">

                <Button text="âž• Ajouter"
                        fx:id="btnAdd"
                        onAction="#handleAddUser"
                        style="-fx-background-color: #198754;
                               -fx-text-fill: white;
                               -fx-font-weight: bold;
                               -fx-background-radius: 8;
                               -fx-padding: 12 25;"/>

                <Button text="âœï¸ Modifier"
                        fx:id="btnEdit"
                        onAction="#handleEdit"
                        disable="true"
                        style="-fx-background-color: #0d6efd;
                               -fx-text-fill: white;
                               -fx-font-weight: bold;
                               -fx-background-radius: 8;
                               -fx-padding: 12 25;"/>

                <Button text="ðŸ—‘ï¸ Supprimer"
                        fx:id="btnDelete"
                        onAction="#handleDelete"
                        disable="true"
                        style="-fx-background-color: #dc3545;
                               -fx-text-fill: white;
                               -fx-font-weight: bold;
                               -fx-background-radius: 8;
                               -fx-padding: 12 25;"/>

                <Button text="âœ” Valider"
                        fx:id="btnValidate"
                        onAction="#handleValidate"
                        disable="true"
                        style="-fx-background-color: #ffc107;
                               -fx-text-fill: black;
                               -fx-font-weight: bold;
                               -fx-background-radius: 8;
                               -fx-padding: 12 25;"/>
            </HBox>

            <Label fx:id="lblMessage"
                   style="-fx-font-weight: bold;
                          -fx-font-size: 14px;"/>

        </VBox>
    </bottom>

</BorderPane>