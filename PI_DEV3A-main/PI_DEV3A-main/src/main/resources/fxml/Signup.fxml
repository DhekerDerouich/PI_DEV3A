<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Hyperlink?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<BorderPane fx:id="rootPane" style="-fx-background-color: linear-gradient(to bottom right, #E8F5E9, #E3F2FD);" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="tn.esprit.farmvision.gestionuser.controller.SignupControllerFX">

    <!-- En-tÃªte avec logo - TRÃˆS COMPACT -->
    <top>
        <VBox alignment="CENTER" spacing="8" style="-fx-padding: 15 0 10 0;">
            <!-- Logo FarmVision trÃ¨s petit -->
            <ImageView fitHeight="70" fitWidth="70" preserveRatio="true">
                <image>
                    <Image url="@../images/logop.png" />
                </image>
                <effect>
                    <DropShadow color="#00000033" radius="10" />
                </effect>
            </ImageView>
        </VBox>
    </top>

    <!-- Formulaire d'inscription - SANS SCROLL, TOUT VISIBLE -->
    <center>
        <VBox alignment="CENTER" maxWidth="580" prefHeight="524.0" prefWidth="464.0">
            <padding>
                <Insets bottom="15" left="30" right="30" top="5" />
            </padding>

            <!-- Carte d'inscription moderne - COMPACTE -->
            <VBox prefHeight="735.0" prefWidth="500.0" spacing="12" style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 25 30; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 20, 0, 0, 5);">

                <Label style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-alignment: center;" text="CrÃ©er un compte" />

                <Label style="-fx-font-size: 12px; -fx-text-fill: #666; -fx-alignment: center;" text="Rejoignez la communautÃ© FarmVision" />

                <!-- Nom et PrÃ©nom cÃ´te Ã  cÃ´te - COMPACT -->
                <HBox spacing="12">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill: #555; -fx-font-weight: bold; -fx-font-size: 12px;" text="Nom" />
                        <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: #F8F9FA; -fx-background-radius: 8; -fx-padding: 10 12; -fx-border-color: #E0E0E0; -fx-border-width: 1; -fx-border-radius: 8;">
                            <Label style="-fx-font-size: 16px;" text="ðŸ‘¤" />
                            <TextField fx:id="txtNom" prefHeight="14.0" prefWidth="164.0" promptText="Nom" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 13px;" HBox.hgrow="ALWAYS" />
                        </HBox>
                    </VBox>

                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill: #555; -fx-font-weight: bold; -fx-font-size: 12px;" text="PrÃ©nom" />
                        <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: #F8F9FA; -fx-background-radius: 8; -fx-padding: 10 12; -fx-border-color: #E0E0E0; -fx-border-width: 1; -fx-border-radius: 8;">
                            <Label style="-fx-font-size: 16px;" text="ðŸ‘¤" />
                            <TextField fx:id="txtPrenom" promptText="PrÃ©nom" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 13px;" HBox.hgrow="ALWAYS" />
                        </HBox>
                    </VBox>
                </HBox>

                <!-- Email - COMPACT -->
                <VBox spacing="5">
                    <Label style="-fx-text-fill: #555; -fx-font-weight: bold; -fx-font-size: 12px;" text="Adresse email" />
                    <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: #F8F9FA; -fx-background-radius: 8; -fx-padding: 10 12; -fx-border-color: #E0E0E0; -fx-border-width: 1; -fx-border-radius: 8;">
                        <Label style="-fx-font-size: 16px;" text="ðŸ“§" />
                        <TextField fx:id="txtEmail" promptText="votre.email@exemple.tn" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 13px;" HBox.hgrow="ALWAYS" />
                    </HBox>
                    <Label fx:id="lblEmailError" style="-fx-text-fill: #dc3545; -fx-font-size: 10px;" visible="false" />
                </VBox>

                <!-- Mots de passe cÃ´te Ã  cÃ´te - GAIN D'ESPACE -->
                <HBox spacing="12">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill: #555; -fx-font-weight: bold; -fx-font-size: 12px;" text="Mot de passe" />
                        <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: #F8F9FA; -fx-background-radius: 8; -fx-padding: 10 12; -fx-border-color: #E0E0E0; -fx-border-width: 1; -fx-border-radius: 8;">
                            <Label style="-fx-font-size: 16px;" text="ðŸ”’" />
                            <PasswordField fx:id="txtPassword" promptText="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 13px;" HBox.hgrow="ALWAYS" />
                        </HBox>
                        <Label fx:id="lblPasswordError" style="-fx-text-fill: #dc3545; -fx-font-size: 10px;" visible="false" />
                    </VBox>

                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill: #555; -fx-font-weight: bold; -fx-font-size: 12px;" text="Confirmer" />
                        <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: #F8F9FA; -fx-background-radius: 8; -fx-padding: 10 12; -fx-border-color: #E0E0E0; -fx-border-width: 1; -fx-border-radius: 8;">
                            <Label style="-fx-font-size: 16px;" text="ðŸ”’" />
                            <PasswordField fx:id="txtPasswordConfirm" promptText="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 13px;" HBox.hgrow="ALWAYS" />
                        </HBox>
                    </VBox>
                </HBox>

                <!-- Type de compte - COMPACT -->
                <VBox spacing="8" style="-fx-background-color: #F0F7FF; -fx-background-radius: 10; -fx-padding: 12 15; -fx-border-color: #2196F3; -fx-border-width: 1; -fx-border-radius: 10;">
                    <Label style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: #1976D2;" text="ðŸŒ¾ Type de compte" />
                    <HBox spacing="20">
                        <RadioButton fx:id="rbAgriculteur" selected="true" style="-fx-font-size: 12px; -fx-text-fill: #333;" text="Agriculteur">
                            <toggleGroup>
                                <ToggleGroup fx:id="roleGroup" />
                            </toggleGroup>
                        </RadioButton>
                        <RadioButton fx:id="rbResponsable" style="-fx-font-size: 12px; -fx-text-fill: #333;" text="Responsable" toggleGroup="$roleGroup" />
                    </HBox>
                </VBox>

                <!-- Champs Agriculteur - COMPACT, CÃ”TE Ã€ CÃ”TE -->
                <HBox fx:id="paneAgriculteur" managed="true" spacing="12" visible="true">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill: #555; -fx-font-weight: bold; -fx-font-size: 12px;" text="TÃ©lÃ©phone" />
                        <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: #F8F9FA; -fx-background-radius: 8; -fx-padding: 10 12; -fx-border-color: #E0E0E0; -fx-border-width: 1; -fx-border-radius: 8;">
                            <Label style="-fx-font-size: 16px;" text="ðŸ“±" />
                            <TextField fx:id="txtTelephone" promptText="12345678" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 13px;" HBox.hgrow="ALWAYS" />
                        </HBox>
                        <Label fx:id="lblTelError" style="-fx-text-fill: #dc3545; -fx-font-size: 10px;" visible="false" />
                    </VBox>

                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill: #555; -fx-font-weight: bold; -fx-font-size: 12px;" text="Adresse" />
                        <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: #F8F9FA; -fx-background-radius: 8; -fx-padding: 10 12; -fx-border-color: #E0E0E0; -fx-border-width: 1; -fx-border-radius: 8;">
                            <Label style="-fx-font-size: 16px;" text="ðŸ“" />
                            <TextField fx:id="txtAdresse" promptText="Votre adresse" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 13px;" HBox.hgrow="ALWAYS" />
                        </HBox>
                    </VBox>
                </HBox>

                <!-- Champs Responsable - COMPACT -->
                <VBox fx:id="paneResponsable" managed="false" spacing="5" visible="false">
                    <Label style="-fx-text-fill: #555; -fx-font-weight: bold; -fx-font-size: 12px;" text="Matricule professionnel" />
                    <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: #F8F9FA; -fx-background-radius: 8; -fx-padding: 10 12; -fx-border-color: #E0E0E0; -fx-border-width: 1; -fx-border-radius: 8;">
                        <Label style="-fx-font-size: 16px;" text="ðŸ†”" />
                        <TextField fx:id="txtMatricule" promptText="Votre matricule" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 13px;" HBox.hgrow="ALWAYS" />
                    </HBox>
                </VBox>

                <!-- Messages erreur/succÃ¨s - COMPACT -->
                <Label fx:id="lblError" managed="false" style="-fx-text-fill: #d32f2f; -fx-background-color: #ffebee; -fx-background-radius: 8; -fx-padding: 10 12; -fx-border-color: #ef5350; -fx-border-width: 1; -fx-border-radius: 8; -fx-font-size: 11px;" visible="false" wrapText="true" />

                <Label fx:id="lblSuccess" managed="false" style="-fx-text-fill: #155724; -fx-background-color: #d4edda; -fx-background-radius: 8; -fx-padding: 10 12; -fx-border-color: #c3e6cb; -fx-border-width: 1; -fx-border-radius: 8; -fx-font-size: 11px;" visible="false" wrapText="true" />

                <!-- Bouton d'inscription - COMPACT -->
                <Button fx:id="btnRegister" maxWidth="Infinity" onAction="#handleRegister" style="-fx-background-color: linear-gradient(to right, #4CAF50, #45a049); -fx-text-fill: white; -fx-font-size: 15px; -fx-font-weight: bold; -fx-padding: 14 0; -fx-background-radius: 8; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(76, 175, 80, 0.4), 10, 0, 0, 4);" text="CrÃ©er mon compte">
                    <cursor>
                        <javafx.scene.Cursor fx:constant="HAND" />
                    </cursor>
                </Button>

                <Button fx:id="btnCancel" managed="false" maxWidth="Infinity" onAction="#handleCancel" text="Annuler" visible="false" />

                <!-- Lien retour login -->
                <HBox alignment="CENTER" spacing="6">
                    <Label style="-fx-text-fill: #666; -fx-font-size: 13px;" text="Vous avez dÃ©jÃ  un compte ?" />
                    <Hyperlink fx:id="linkLogin" onAction="#handleGoToLogin" style="-fx-text-fill: #2196F3; -fx-font-weight: bold; -fx-font-size: 13px; -fx-underline: false;" text="Se connecter">
                        <cursor>
                            <javafx.scene.Cursor fx:constant="HAND" />
                        </cursor>
                    </Hyperlink>
                </HBox>
            </VBox>
        </VBox>
    </center>

    <!-- Footer - MINIMAL -->
    <bottom>
        <VBox alignment="CENTER" prefHeight="0.0" prefWidth="558.0" style="-fx-padding: 10;">
            <Label style="-fx-text-fill: #999; -fx-font-size: 10px;" text="Â© 2026 FarmVision" />
        </VBox>
    </bottom>
</BorderPane>