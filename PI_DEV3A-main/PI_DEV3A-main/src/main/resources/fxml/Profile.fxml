<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="tn.esprit.farmvision.gestionuser.controller.ProfileController"
            fx:id="rootPane" style="-fx-background-color: #f8f9fa;">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 20;">
            <Button text="â† Retour" fx:id="btnRetour" onAction="#handleRetour"
                    style="-fx-background-color: #6c757d; -fx-text-fill: white; -fx-padding: 10 20; -fx-font-weight: bold;"/>
            <Label text="ðŸ‘¤ Mon Profil" style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: #0d6efd;" HBox.hgrow="ALWAYS"/>
        </HBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <VBox spacing="25" style="-fx-padding: 30; -fx-max-width: 800;">

                <!-- Carte Informations personnelles -->
                <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 5);">
                    <Label text="ðŸ“‹ Informations personnelles" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #0d6efd;"/>

                    <HBox spacing="15">
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="Nom *" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtNom" promptText="Votre nom"/>
                        </VBox>
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="PrÃ©nom *" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtPrenom" promptText="Votre prÃ©nom"/>
                        </VBox>
                    </HBox>

                    <VBox spacing="5">
                        <Label text="Email *" style="-fx-font-weight: bold;"/>
                        <TextField fx:id="txtEmail" promptText="votre@email.com"/>
                    </VBox>

                    <VBox spacing="5">
                        <Label text="RÃ´le" style="-fx-font-weight: bold;"/>
                        <TextField fx:id="txtRole" editable="false" style="-fx-opacity: 0.7;"/>
                    </VBox>
                </VBox>

                <!-- Carte Informations spÃ©cifiques (Agriculteur) -->
                <VBox fx:id="paneAgriculteur" spacing="15" visible="false" managed="false"
                      style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 5);">
                    <Label text="ðŸŒ¾ Informations Agriculteur" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #198754;"/>

                    <VBox spacing="5">
                        <Label text="TÃ©lÃ©phone *" style="-fx-font-weight: bold;"/>
                        <TextField fx:id="txtTelephone" promptText="Ex: 98123456"/>
                    </VBox>

                    <VBox spacing="5">
                        <Label text="Adresse *" style="-fx-font-weight: bold;"/>
                        <TextArea fx:id="txtAdresse" promptText="Votre adresse complÃ¨te" prefRowCount="3"/>
                    </VBox>
                </VBox>

                <!-- Carte Informations spÃ©cifiques (Responsable) -->
                <VBox fx:id="paneResponsable" spacing="15" visible="false" managed="false"
                      style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 5);">
                    <Label text="ðŸ‘” Informations Responsable" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #0d6efd;"/>

                    <VBox spacing="5">
                        <Label text="Matricule" style="-fx-font-weight: bold;"/>
                        <TextField fx:id="txtMatricule" editable="false" style="-fx-opacity: 0.7;"/>
                    </VBox>
                </VBox>

                <!-- Carte Informations Admin -->
                <VBox fx:id="paneAdmin" spacing="15" visible="false" managed="false"
                      style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 5);">
                    <Label text="ðŸ‘¨â€ðŸ’¼ Informations Administrateur" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #dc3545;"/>

                    <VBox spacing="5">
                        <Label text="Matricule" style="-fx-font-weight: bold;"/>
                        <TextField fx:id="txtMatriculeAdmin" editable="false" style="-fx-opacity: 0.7;"/>
                    </VBox>
                </VBox>

                <!-- Carte Changer mot de passe -->
                <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 5);">
                    <Label text="ðŸ”’ Changer le mot de passe" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #ffc107;"/>

                    <VBox spacing="5">
                        <Label text="Ancien mot de passe *" style="-fx-font-weight: bold;"/>
                        <PasswordField fx:id="txtOldPassword" promptText="Votre ancien mot de passe"/>
                    </VBox>

                    <HBox spacing="15">
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="Nouveau mot de passe *" style="-fx-font-weight: bold;"/>
                            <PasswordField fx:id="txtNewPassword" promptText="Min. 6 caractÃ¨res"/>
                        </VBox>
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="Confirmer nouveau *" style="-fx-font-weight: bold;"/>
                            <PasswordField fx:id="txtConfirmPassword" promptText="Confirmer"/>
                        </VBox>
                    </HBox>

                    <Label text="ðŸ’¡ Laissez vide si vous ne voulez pas changer le mot de passe"
                           style="-fx-text-fill: #666666; -fx-font-size: 12px;"/>
                </VBox>

                <!-- Messages -->
                <Label fx:id="lblError" wrapText="true" visible="false"
                       style="-fx-padding: 15; -fx-background-radius: 5;"/>

                <!-- Boutons -->
                <HBox spacing="15" alignment="CENTER">
                    <Button text="âŒ Annuler" fx:id="btnCancel" onAction="#handleCancel"
                            style="-fx-background-color: #6c757d; -fx-text-fill: white; -fx-padding: 12 40; -fx-font-size: 14px; -fx-font-weight: bold;"/>
                    <Button text="ðŸ’¾ Enregistrer les modifications" fx:id="btnSave" onAction="#handleSave"
                            style="-fx-background-color: #198754; -fx-text-fill: white; -fx-padding: 12 40; -fx-font-size: 14px; -fx-font-weight: bold;"/>
                </HBox>

                <Separator/>

                <!-- Info compte -->
                <VBox spacing="5" style="-fx-padding: 10;">
                    <Label fx:id="lblDateCreation" text="ðŸ“… Compte crÃ©Ã© le : --/--/----" style="-fx-text-fill: #666666;"/>
                    <Label fx:id="lblStatut" text="âœ… Statut : ActivÃ©" style="-fx-text-fill: #198754; -fx-font-weight: bold;"/>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>
